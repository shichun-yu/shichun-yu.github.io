(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{371:function(a,t,s){"use strict";s.r(t);var n=s(42),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"首屏时间优化-项目优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#首屏时间优化-项目优化"}},[a._v("#")]),a._v(" 首屏时间优化(项目优化)")]),a._v(" "),s("h2",{attrs:{id:"路由懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由懒加载"}},[a._v("#")]),a._v(" 路由懒加载")]),a._v(" "),s("p",[a._v("结合 Vue 的异步组件和 Webpack 的代码分割功能，轻松实现路由组件的懒加载。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("const Home = () => import('./views/Home.vue')\nconst Login = () => import('./views/Login.vue')\n")])])]),s("h2",{attrs:{id:"gzip压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩"}},[a._v("#")]),a._v(" gzip压缩")]),a._v(" "),s("h3",{attrs:{id:"gzip压缩-服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩-服务器"}},[a._v("#")]),a._v(" gzip压缩-服务器")]),a._v(" "),s("p",[a._v("如果 Nginx 服务器开启 gzip，会将静态资源在服务端进行压缩，压缩包传输给浏览器后，浏览器再进行解压使用，这大大提高了网络传输的效率，尤其对 js，css 这类文本的压缩，效果很明显。")]),a._v(" "),s("p",[a._v("以下是 Nginx 开启 gzip 的配置：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 开启|关闭 gzip。\ngzip on|off;\n\n# 文件大于指定 size 才压缩，以 kb 为单位。\ngzip_min_length 10;\n\n# 压缩级别，1-9，值越大压缩比越大，但更加占用 CPU，且压缩效率越来越低。\ngzip_comp_level 2;\n\n# 压缩的文件类型。\ngzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript;\n\n# 开启后如果能找到 .gz 文件，直接返回该文件，不会启用服务端压缩。\ngzip_static on|off\n    \n# 是否添加响应头 Vary: Accept-Encoding 建议开启。\ngzip_vary on;\n\n# 请求压缩的缓冲区数量和大小，以 4k 为单位，32 为倍数。\ngzip_buffers 32 4K;\n")])])]),s("h3",{attrs:{id:"gzip压缩-前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩-前端"}},[a._v("#")]),a._v(" gzip压缩-前端")]),a._v(" "),s("p",[a._v("Nginx 没有开启 gzip，前端在打包的时候可以打包出一份资源的压缩版本，Nginx 也会把压缩文件传输给浏览器。")]),a._v(" "),s("h4",{attrs:{id:"_1-安装一个插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装一个插件"}},[a._v("#")]),a._v(" 1. 安装一个插件:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm i -D compression-webpack-plugin\n")])])]),s("h4",{attrs:{id:"_2-vue-config-js-中配置下插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue-config-js-中配置下插件"}},[a._v("#")]),a._v(" 2. vue.config.js 中配置下插件:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("const CompressionPlugin = require(\"compression-webpack-plugin\")\n\nmodule.exports = {\n  configureWebpack: config => {\n    if (process.env.NODE_ENV === 'production') {\n      return {\n        plugins: [\n          new CompressionPlugin({\n            test: /\\.js$|\\.html$|\\.css/,\n            threshold: 10240,\n            deleteOriginalAssets: false\n          })\n        ]\n      }\n    }\n  }\n}\n")])])]),s("h4",{attrs:{id:"_3-nginx配合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-nginx配合"}},[a._v("#")]),a._v(" 3. nginx配合:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("gzip_static on;\n")])])]),s("h2",{attrs:{id:"cdn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cdn"}},[a._v("#")]),a._v(" CDN")]),a._v(" "),s("p",[a._v("所有依赖使用cdn引入")]),a._v(" "),s("p",[a._v("推荐源:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("https://cdn.jsdelivr.net // (经测试, 国内外ping 都是很快的)\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);